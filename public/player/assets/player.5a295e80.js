(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function P(){n(),window.addEventListener("resize",n);function n(){let e=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${e}px`)}}function F(n,e=100){let t=null;return function(r){t===null&&(t=setTimeout(()=>{n.apply(this,r),t=null},e))}}(function(){window.w=window,window.d=document})();const j={SERVER:{URL:"https://demo2-iwi.test/",URL_PUBLIC:"https://demo2-iwi.test/",URL_API:"https://demo2-iwi.test/api-iwi"}};window.env=j;const V="modulepreload",N=function(n,e){return new URL(n,e).href},L={},p=function(e,t,r){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=N(s,r),s in L)return;L[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let f=i.length-1;f>=0;f--){const d=i[f];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":V,o||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),o)return new Promise((f,d)=>{l.addEventListener("load",f),l.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())},v=(n,e)=>{const t=n[e];return t?typeof t=="function"?t():Promise.resolve(t):new Promise((r,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+e)))})},m={development:!1,scrollTriggerBreakpointMonitoring:!1,jsonConfigAttribute:"data-iwt-config",componentBehaviourAttribute:"data-iwt-behaviour",mediaQueryList:[window.matchMedia("(min-width: 768px)"),window.matchMedia("(min-width: 992px)"),window.matchMedia("(min-width: 1280px)")]},S={USER_INTERACTIVITY_AVAILABLE:"userInteractivityAvailable",USER_INTERACTIVITY_ALLOWED:"userInteractivityAllowed",MAKE_UP_ALLOWED:"makeUpAllowed",REFRESH_LAYOUT:"refreshLayout"};class U{constructor(e){this._eventEmitter=e,this.run()}_loadDependences(){this._init()}run(){this._destroy(),this._loadDependences()}_destroy(){this._eventEmitter.removeAllListeners(),this._registeredComponentsMap&&(this._registeredComponentsMap.forEach(({instance:e})=>{e&&e.destroy()}),this._registeredComponentsMap.clear())}_init(){this._eventEmitter.on(S.USER_INTERACTIVITY_AVAILABLE,t=>this._userInteractivityAvailableHandler(t)),window.addEventListener("load",()=>this._notifiesAllComponentsThatMakeUpIsAllowed()),this._numberOfBehavioursThatCompletedTheDownloadAttempt=0,this._currentID=1,this._componentsConfigurationProperties=document.querySelector(`[${m.jsonConfigAttribute}]`)?JSON.parse(document.querySelector(`[${m.jsonConfigAttribute}]`).textContent):null,this._registeredComponentsMap=new Map,Array.from(document.querySelectorAll(`[${m.componentBehaviourAttribute}]`)).forEach(t=>this._configureAndStartComponentLoading(t)),this._registeredComponentsMap.forEach((t,r)=>this._whenTheDownloadIsComplete(r,t))}_userInteractivityAvailableHandler({id:e}){let t=this._registeredComponentsMap.get(e);t.userInteractivityAvailable=!0,this._notifiesAllComponentsThatTheInteractiveIsAllowed()}_ifAllComponentsHaveTheInteractivityAvailable(){if(this._numberOfBehavioursThatCompletedTheDownloadAttempt===this._registeredComponentsMap.size){let e=!0;return this._registeredComponentsMap.forEach(({userInteractivityAvailable:t,download:r,instance:i})=>{r!=="error"&&!t&&(e=!1)}),e}}_notifiesAllComponentsThatTheInteractiveIsAllowed(){this._ifAllComponentsHaveTheInteractivityAvailable()&&this._registeredComponentsMap.forEach(({instance:e})=>{e&&e.whenInteractivityWithTheUserIsAllowed()})}_notifiesAllComponentsThatMakeUpIsAllowed(){this._registeredComponentsMap.forEach(({instance:e})=>{e&&e.whenMakeupIsAllowed()})}_configureAndStartComponentLoading(e){let t=e.getAttribute(m.componentBehaviourAttribute),r=`${t}-${this._currentID+Date.now()}`;this._currentID++;let i=this._componentsConfigurationProperties[t]||{behaviour:"yours",props:null},s,o;!i||!i.behaviour||i.behaviour==="yours"?t.indexOf("/")===-1?o=v(Object.assign({}),`../../../components/${t}/${t}.js`):o=v(Object.assign({}),`../../../components/${t}.js`):i.behaviour.indexOf("/")===-1?o=v(Object.assign({"../behaviours/main-app/main-app.js":()=>p(()=>import("./main-app.bf634596.js"),["./main-app.bf634596.js","./goldComponent.e5e22987.js"],import.meta.url),"../behaviours/responsive-video/responsive-video.js":()=>p(()=>import("./responsive-video.7dd8a3c5.js"),["./responsive-video.7dd8a3c5.js","./goldComponent.e5e22987.js"],import.meta.url),"../behaviours/video-controls/hot-points.js":()=>p(()=>import("./hot-points.5049d712.js"),[],import.meta.url),"../behaviours/video-controls/video-controls.js":()=>p(()=>import("./video-controls.730ec0c5.js"),["./video-controls.730ec0c5.js","./goldComponent.e5e22987.js","./hot-points.5049d712.js"],import.meta.url)}),`../behaviours/${i.behaviour}/${i.behaviour}.js`):o=v(Object.assign({}),`../behaviours/${i.behaviour}.js`),this._registeredComponentsMap.set(r,{name:t,file:s,domNode:e,userInteractivityAvailable:!1,download:"processing",errorType:void 0,props:i.props,instance:void 0,promise:o})}_whenTheDownloadIsComplete(e,t){t.promise.then(r=>this._registerAndInitalizeComponent(e,t,r.default)).catch(r=>this._whenThereIsAnErrorWhenDownloading(r,e,t))}_whenThereIsAnErrorWhenDownloading(e,t,r){this._numberOfBehavioursThatCompletedTheDownloadAttempt++,r.promise=null,r.download="error",r.errorType=e,console.log("COMPONENTE "+t+" - EL ERROR ES: "+e)}_registerAndInitalizeComponent(e,t,r){this._numberOfBehavioursThatCompletedTheDownloadAttempt++,t.promise=null,t.download="completed",t.instance=new r(this._eventEmitter,e,t.domNode,t.props,t.name),t.instance.whenTheBehaviourIsFullyLoaded()}}var y={exports:{}},h=typeof Reflect=="object"?Reflect:null,E=h&&typeof h.apply=="function"?h.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},_;h&&typeof h.ownKeys=="function"?_=h.ownKeys:Object.getOwnPropertySymbols?_=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:_=function(e){return Object.getOwnPropertyNames(e)};function $(n){console&&console.warn&&console.warn(n)}var A=Number.isNaN||function(e){return e!==e};function u(){u.init.call(this)}y.exports=u;y.exports.once=H;u.EventEmitter=u;u.prototype._events=void 0;u.prototype._eventsCount=0;u.prototype._maxListeners=void 0;var b=10;function w(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return b},set:function(n){if(typeof n!="number"||n<0||A(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");b=n}});u.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};u.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||A(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function C(n){return n._maxListeners===void 0?u.defaultMaxListeners:n._maxListeners}u.prototype.getMaxListeners=function(){return C(this)};u.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")E(c,this,t);else for(var l=c.length,f=R(c,l),r=0;r<l;++r)E(f[r],this,t);return!0};function I(n,e,t,r){var i,s,o;if(w(t),s=n._events,s===void 0?(s=n._events=Object.create(null),n._eventsCount=0):(s.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),s=n._events),o=s[e]),o===void 0)o=s[e]=t,++n._eventsCount;else if(typeof o=="function"?o=s[e]=r?[t,o]:[o,t]:r?o.unshift(t):o.push(t),i=C(n),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=n,a.type=e,a.count=o.length,$(a)}return n}u.prototype.addListener=function(e,t){return I(this,e,t,!1)};u.prototype.on=u.prototype.addListener;u.prototype.prependListener=function(e,t){return I(this,e,t,!0)};function k(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function O(n,e,t){var r={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},i=k.bind(r);return i.listener=t,r.wrapFn=i,i}u.prototype.once=function(e,t){return w(t),this.on(e,O(this,e,t)),this};u.prototype.prependOnceListener=function(e,t){return w(t),this.prependListener(e,O(this,e,t)),this};u.prototype.removeListener=function(e,t){var r,i,s,o,a;if(w(t),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===t||r.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():B(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};u.prototype.off=u.prototype.removeListener;u.prototype.removeAllListeners=function(e){var t,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function T(n,e,t){var r=n._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?D(i):R(i,i.length)}u.prototype.listeners=function(e){return T(this,e,!0)};u.prototype.rawListeners=function(e){return T(this,e,!1)};u.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):M.call(n,e)};u.prototype.listenerCount=M;function M(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}u.prototype.eventNames=function(){return this._eventsCount>0?_(this._events):[]};function R(n,e){for(var t=new Array(e),r=0;r<e;++r)t[r]=n[r];return t}function B(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function D(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function H(n,e){return new Promise(function(t,r){function i(o){n.removeListener(e,s),r(o)}function s(){typeof n.removeListener=="function"&&n.removeListener("error",i),t([].slice.call(arguments))}x(n,e,s,{once:!0}),e!=="error"&&W(n,i,{once:!0})})}function W(n,e,t){typeof n.on=="function"&&x(n,"error",e,t)}function x(n,e,t,r){if(typeof n.on=="function")r.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function i(s){r.once&&n.removeEventListener(e,i),t(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}class g{constructor(){if(new.target===g)throw new TypeError("GoldApp is an abstract class");this._initializeViewportHeightControlMonitoring(),this._eventEmitter=new y.exports.EventEmitter,this._goldLayout=new U(this._eventEmitter)}refreshLayout(){this._goldLayout.run()}_setVhCssVariable(){let e=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${e}px`)}_initializeViewportHeightControlMonitoring(){this._setVhCssVariable=this._setVhCssVariable.bind(this),this._setVhCssVariable(),window.addEventListener("resize",this._setVhCssVariable)}_finalizeViewportHeightControlMonitoring(){window.removeEventListener("resize",this._setVhCssVariable)}destroy(){this._goldLayout.destroy(),this._goldLayout=null,this._eventEmitter=null,this._finalizeViewportHeightControlMonitoring()}}class z extends g{constructor(){super(),this._main()}_main(){}destroy(){}}P();addEventListener("DOMContentLoaded",n=>{new z});export{j as e,F as t};
